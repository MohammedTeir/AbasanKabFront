import{d as N,e as n,c,p as j,q as I,r as a,o as B,a as _,h as A,b as w,w as f,i as L,s as q,F as k,j as e,k as D,v as V,x as $,u as g,y as p,m as C,t as d}from"./index-717cf31f.js";const F=N({__name:"BaseButton",props:{fill:{type:Boolean,default:!0}},setup(T){return(r,v)=>(n(),c("button",{type:"button",class:I([r.fill?"bg-[#A7A465]":"bg-white",r.fill?"text-white":"text-[#A7A465]","border-[3px] border-[#A7A465] rounded-[10px] text-center w-[320px] h-[60px] text-[20px]"])},[j(r.$slots,"default")],2))}}),O=e("h2",{class:"text-[28px] font-bold text-start"},"تقديم طلب خدمة جديدة",-1),P={class:"w-full"},G={action:""},H={class:"grid grid-cols-1 lg:gap-x-10 lg:gap-y-4"},J={class:"text-start w-full"},K=e("label",{for:"dep-name",class:"text-[18px] lg:text-[22px] mb-2 block lg:mb-[30px]"},"إسم الدائرة",-1),Q=e("option",{disabled:"",selected:""},"اختر الدائرة",-1),R=["value"],W={class:"text-start"},X=e("label",{for:"dep-name",class:"text-[18px] lg:text-[22px] mb-2 block lg:mb-[30px]"},"نوع الخدمة",-1),Y=["value"],Z={key:0,class:"absolute z-10 mt-1 py-1 w-full bg-white rounded-md shadow-lg"},ee=["onClick"],te={class:"font-semibold"},se={class:"flex flex-col items-start"},oe=e("label",{for:"customer-name",class:"text-[18px] lg:text-[22px] mb-2 block lg:mb-[30px]"},"أرفق ملفات",-1),le={class:"flex flex-col items-start"},ae=e("label",{for:"customer-name",class:"text-[18px] lg:text-[22px] mb-2 block lg:mb-[30px]"},"إسم المستفيد",-1),ne={class:"flex flex-col items-start"},re=e("label",{for:"phone",class:"text-[18px] lg:text-[22px] mb-2 block lg:mb-[30px]"},"رقم الجوال",-1),ce={class:"flex gap-2 lg:gap-x-10 mt-3 lg:mt-0"},de=N({__name:"ServicesPage",setup(T){const r=a();B(async()=>{try{const t=await _.get("/service-categories");r.value=t.data.data,console.log(r.value)}catch(t){console.log(t)}}),B(async()=>{try{const t=await _.get("/services/category/1");console.log(t)}catch(t){console.log(t)}});const v=a(),S=a();async function z(t){const o=t.target.value;S.value=t.target.value;try{const l=await _.get(`services/category/${o}`);console.log(l.data.data),v.value=l.data.data}catch(l){console.log(l)}}const i=a(!1),b=a(null),M=t=>{console.log(t),b.value=t,i.value=!1},h=a(),u=a(),y=a();function E(t){h.value=Array.from(t.target.files)}async function U(){var l,x;const t=new FormData;(l=h.value)==null||l.forEach(m=>{t.append("attached_files[]",m)}),console.log(h.value),t.append("service_id",(x=b.value)==null?void 0:x.id),t.append("service_category_id",S.value),console.log(t);const o=await _.post("/auth/service-request",t,{headers:{Authorization:`Bearer ${p().token}`}});console.log(o.data),o.data.status==200?(y.value=!0,u.value=o.data.message):(y.value=!1,u.value=o.data.message),setTimeout(()=>{u.value=""},3e3)}return(t,o)=>{const l=A("base-section"),x=A("toast");return n(),c(k,null,[w(l,null,{default:f(()=>{var m;return[O,e("article",P,[e("form",G,[e("div",H,[e("div",J,[K,e("select",{class:"px-4 py-3 rounded-xl border w-full",id:"dep-name",onChange:z},[Q,(n(!0),c(k,null,D(r.value,s=>(n(),c("option",{value:s==null?void 0:s.id},d(s==null?void 0:s.name),9,R))),256))],32)]),e("div",W,[X,e("div",{class:"relative",onClick:o[0]||(o[0]=s=>i.value=!i.value)},[e("input",{type:"text",class:"px-4 py-3 rounded-xl border w-full cursor-pointer",id:"dep-name",value:(m=b.value)==null?void 0:m.service_name,readonly:""},null,8,Y),i.value?(n(),c("div",Z,[(n(!0),c(k,null,D(v.value,s=>(n(),c("div",{class:"flex flex-col px-4 py-2 cursor-pointer hover:bg-gray-100 border border-gray-600 rounded-md odd:mb-2",onClick:()=>{M(s),i.value=!i.value}},[e("p",te,"اسم الخدمة: "+d(s.service_name),1),e("p",null,"السعر: "+d(s.price),1),e("p",null,"الوقت المطلوب: "+d(s.required_time),1),e("p",null,"المستندات المطلوبة: "+d(s==null?void 0:s.required_documents),1)],8,ee))),256))])):q("",!0)])]),e("div",se,[oe,e("input",{type:"file",id:"customer-name",required:"",class:"p-2 border rounded-xl w-full text-[18px]",onChange:E,multiple:""},null,32)]),e("div",le,[ae,V(e("input",{type:"text",id:"customer-name",required:"",class:"p-2 border rounded-xl w-full text-[18px]",readonly:"","onUpdate:modelValue":o[1]||(o[1]=s=>g(p)().name=s)},null,512),[[$,g(p)().name]])]),e("div",ne,[re,V(e("input",{type:"text",id:"phone",required:"",class:"p-2 border rounded-xl w-full text-[18px]",readonly:"","onUpdate:modelValue":o[2]||(o[2]=s=>g(p)().phone=s)},null,512),[[$,g(p)().phone]])]),e("div",ce,[w(F,{onClick:o[3]||(o[3]=s=>U())},{default:f(()=>[C("طلب الخدمة")]),_:1}),w(F,{fill:!1},{default:f(()=>[C("إلغاء الأمر")]),_:1})])])])])]}),_:1}),u.value?(n(),L(x,{key:0,type:y.value},{default:f(()=>[C(d(u.value),1)]),_:1},8,["type"])):q("",!0)],64)}}});export{de as default};
